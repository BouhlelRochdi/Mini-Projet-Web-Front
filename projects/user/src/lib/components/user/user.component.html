<ng-container *ngIf="profileUser$ | async as profile; else Loading">

  <mat-card>
    <form [formGroup]="profileSettingForm">
      <div fxLayoutGap="18px" fxLayoutAlign="center center" fxLayout="column">

        <mat-form-field>
          <input matInput placeholder="firstName" formControlName="firstName" />
          <div *ngIf="submitted && profileSettingForm.controls.firstName.errors">
            <mat-error *ngIf="profileSettingForm.controls.firstName.errors.required"> firstName required </mat-error>
          </div>
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="lastName" formControlName="lastName" />
        </mat-form-field>

        <mat-form-field>
          <input matInput type="email" placeholder="Email" formControlName="email" />
          <div *ngIf="submitted && profileSettingForm.controls.email.errors">
            <mat-error *ngIf="profileSettingForm.controls.email.errors.required">Email required
            </mat-error>
          </div>
        </mat-form-field>

        <div>
          <button mat-raised-button (click)="onSubmit()" color="primary"
            [disabled]="!profileSettingForm.valid || (profileSettingForm.dirty && !profileSettingForm.valid) || !profileSettingForm.dirty">
            <mat-icon>how_to_reg</mat-icon> Update
          </button>
        </div>

      </div>
    </form>
  </mat-card>
</ng-container>

<ng-template #Loading>
  <mat-spinner class="center-content"></mat-spinner>
</ng-template>